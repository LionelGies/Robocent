<div class="g_6">
  <div class="widget_header">
    <h4 class="widget_header_title wwIcon i_16_valid">Upload Multiple Contacts</h4>
  </div>
  <div class="widget_contents noPadding">
    <%= form_for(@import ||= Import.new) do |f| %>
      <div class="line_grid">
        <div class="g_3">
          <span class="label">List Name<span class="must">*</span></span>
        </div>
        <div class="g_9">
          <%= f.select :list_id, current_user.lists.collect{|l| [l.name, l.id]}, {}, :class => "simple_form", :required => true %>
        </div>
      </div>
      <div class="line_grid">
        <div class="g_3">
          <span class="label">Excel / CSV</span>
        </div>
        <div class="g_9">
          <%= f.file_field :file_name, :class => "simple_form" %>
        </div>
      </div>
      <div class="line_grid">
        <div class="g_3"></div>
        <div class="g_9">
          <%= f.submit "Upload", :class => "submitIt simple_buttons" %>
        </div>
      </div>
    <% end %>
  </div>
</div>

<script type="text/javascript">
  $(function(){
    $('#import_file_name').change(function(){
      var ext = $('#import_file_name').val().split('.').pop().toLowerCase();
      if($.inArray(ext, ['xls','xlsx','csv']) == -1) {
        alert('You may only upload an xls, xlsx, or csv file');
      }
    });

    $("#new_import").submit(function(){
      var ext = $('#import_file_name').val().split('.').pop().toLowerCase();
      if($.inArray(ext, ['xls','xlsx','csv']) == -1) {
        alert('You may only upload an xls, xlsx, or csv file');
        return false;
      }else { return true; }
    });
  });
</script>